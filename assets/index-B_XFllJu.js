import{r as e,a as s}from"./vendor-9fiDQRhm.js";import{X as t,D as l,P as r,M as a,C as c,B as n,Z as o,R as i,A as d,H as x,S as m,a as u,T as h,b as p,c as f,d as b,e as j}from"./icons-BrHDI6cA.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var g={exports:{}},N={},v=e,y=Symbol.for("react.element"),w=Symbol.for("react.fragment"),S=Object.prototype.hasOwnProperty,k=v.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C={key:!0,ref:!0,__self:!0,__source:!0};function M(e,s,t){var l,r={},a=null,c=null;for(l in void 0!==t&&(a=""+t),void 0!==s.key&&(a=""+s.key),void 0!==s.ref&&(c=s.ref),s)S.call(s,l)&&!C.hasOwnProperty(l)&&(r[l]=s[l]);if(e&&e.defaultProps)for(l in s=e.defaultProps)void 0===r[l]&&(r[l]=s[l]);return{$$typeof:y,type:e,key:a,ref:c,props:r,_owner:k.current}}N.Fragment=w,N.jsx=M,N.jsxs=M,g.exports=N;var O,_=g.exports,z=s;O=z.createRoot,z.hydrateRoot;const A=(e,s)=>Math.floor(Math.random()*(s-e+1))+e,E="mathOrbitHistory",I=({icon:e,label:s,value:t,color:l})=>_.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl flex items-center space-x-4 border border-slate-700",children:[_.jsx("div",{className:`p-3 rounded-full ${l}`,children:e}),_.jsxs("div",{children:[_.jsx("p",{className:"text-slate-400 text-sm",children:s}),_.jsx("p",{className:"text-white font-bold text-xl",children:t})]})]}),P=({children:e,onClick:s,disabled:t})=>_.jsx("button",{onClick:s,disabled:t,className:"w-full h-full p-6 bg-slate-700/50 hover:bg-slate-600/50 border border-slate-600 rounded-xl transform hover:-translate-y-1 transition-all duration-300 disabled:bg-slate-800/20 disabled:text-slate-500 disabled:cursor-not-allowed disabled:transform-none flex flex-col items-center justify-center text-center",children:e});function B(){const[s,g]=e.useState("setup"),[N,v]=e.useState("group"),[y,w]=e.useState(null),[S,k]=e.useState(null),[C,M]=e.useState(null),[O,z]=e.useState({}),[B,D]=e.useState(""),[L,R]=e.useState(null),[T,$]=e.useState(""),[H,U]=e.useState(0),[F,Y]=e.useState(0),[q,J]=e.useState(60),[G,K]=e.useState({correct:0,incorrect:0,problems:[]}),[V,W]=e.useState([]),Z=e.useMemo(()=>({levels:{easy:{name:"Easy",range:[1,20],ops:["+","-"]},medium:{name:"Medium",range:[1,100],ops:["+","-","*"]},hard:{name:"Hard",range:[2,150],ops:["+","-","*","/"]},master:{name:"Master (6-9)",range:[6,9],ops:["*","/"]}},groups:{A:{name:"Multiplication & Division",ops:["*","/"],icon:_.jsxs("div",{className:"flex justify-center gap-2",children:[_.jsx(t,{size:24}),_.jsx(l,{size:24})]})},B:{name:"Addition & Subtraction",ops:["+","-"],icon:_.jsxs("div",{className:"flex justify-center gap-2",children:[_.jsx(r,{size:24}),_.jsx(a,{size:24})]})}},modes:{time:{name:"Time Challenge",icon:_.jsx(c,{className:"w-10 h-10 mx-auto mb-2 text-blue-400"})},practice:{name:"Practice Mode",icon:_.jsx(n,{className:"w-10 h-10 mx-auto mb-2 text-green-400"})},streak:{name:"Streak Mode",icon:_.jsx(o,{className:"w-10 h-10 mx-auto mb-2 text-purple-400"})}}}),[]);e.useEffect(()=>{try{const e=JSON.parse(localStorage.getItem(E))||[];W(e)}catch(e){console.error("Could not load history from localStorage:",e),W([])}},[]);const Q=e.useCallback(()=>{g("setup"),v("group"),w(null),k(null),M(null)},[]),X=e.useCallback(e=>{if(!y||!S||!C)return;const s={date:(new Date).toISOString(),score:e.score,accuracy:e.accuracy,settings:{group:Z.groups[y].name,difficulty:Z.levels[S].name,mode:Z.modes[C].name}};W(e=>{const t=[s,...e].slice(0,15);try{localStorage.setItem(E,JSON.stringify(t))}catch(l){console.error("Could not save history to localStorage:",l)}return t})},[y,S,C,Z]),ee=e.useCallback(()=>{const e=Z.levels[S],s=Z.groups[y],t=e.ops.filter(e=>s.ops.includes(e));if(0===t.length)return console.error("No available operations for this group and difficulty."),void Q();const l=t[A(0,t.length-1)];let r,a,c;if("master"===S)if("*"===l)r=A(6,9),a=A(6,9),c=r*a;else{const e=A(6,9),s=A(6,9);r=e*s,a=s,c=e}else"/"===l?(c=A(2,12),a=A(2,12),r=a*c):"*"===l?(r=A(2,12),a=A(2,12),c=r*a):(r=A(...e.range),a=A(...e.range),"-"===l&&r<a&&([r,a]=[a,r]),c="+"===l?r+a:r-a);z({num1:r,num2:a,operator:l,answer:c}),D(""),R(null)},[S,y,Z,Q]),se=e.useCallback(()=>{const e=G.correct+G.incorrect,s=e>0?Math.round(G.correct/e*100):0;X({score:H,accuracy:s}),g("results")},[G,H,X]),te=e=>{if(e.preventDefault(),""===B.trim()||L)return;const t=parseInt(B,10)===O.answer,l={...O,userAnswer:B,isCorrect:t};K(e=>({...e,correct:e.correct+(t?1:0),incorrect:e.incorrect+(t?0:1),problems:[...e.problems,l]})),t?(R("correct"),$("Correct!"),U(e=>e+10),Y(e=>e+1)):(R("incorrect"),$(`Not quite! The answer was ${O.answer}`),Y(0),"streak"===C&&se()),setTimeout(()=>{"playing"!==s||"streak"===C&&!t||ee()},400)};e.useEffect(()=>{if("playing"===s&&"time"===C){if(q>0){const e=setInterval(()=>J(e=>e-1),1e3);return()=>clearInterval(e)}se()}},[s,C,q,se]),e.useEffect(()=>{var e;"playing"===s&&(null==(e=document.getElementById("answer-input"))||e.focus())},[O,s]);const le=e=>{w(e),v("difficulty")},re=e=>{k(e),v("mode")},ae=e=>{M(e),U(0),Y(0),J(60),K({correct:0,incorrect:0,problems:[]}),g("playing"),ee()},ce=()=>{const e=e=>!!y&&Z.levels[e].ops.some(e=>Z.groups[y].ops.includes(e));return _.jsxs("div",{className:"text-center w-full max-w-4xl",children:[_.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[_.jsx(i,{className:"w-16 h-16 text-purple-400"}),_.jsx("h1",{className:"text-5xl font-bold text-white tracking-wider",children:"Math Orbit"})]}),_.jsx("p",{className:"text-slate-300 mb-10 text-lg",children:"Configure your mission or view history"}),"group"!==N&&_.jsxs("button",{onClick:()=>v("difficulty"===N?"group":"difficulty"),className:"absolute top-6 left-6 flex items-center gap-2 text-slate-300 hover:text-white transition",children:[_.jsx(d,{size:20})," Back"]}),"group"===N&&_.jsx("div",{children:_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[_.jsx("div",{className:"md:col-span-1",children:_.jsxs(P,{onClick:()=>g("history"),children:[_.jsx(x,{className:"w-10 h-10 mx-auto mb-2 text-yellow-400"}),_.jsx("span",{className:"text-xl font-semibold",children:"History"}),_.jsx("p",{className:"text-sm text-slate-400",children:"View past 15 games"})]})}),_.jsxs("div",{className:"md:col-span-2 grid grid-cols-2 gap-6",children:[_.jsxs(P,{onClick:()=>le("A"),children:[_.jsx("div",{className:"mb-2",children:Z.groups.A.icon}),_.jsx("span",{className:"text-xl font-semibold",children:Z.groups.A.name})]}),_.jsxs(P,{onClick:()=>le("B"),children:[_.jsx("div",{className:"mb-2",children:Z.groups.B.icon}),_.jsx("span",{className:"text-xl font-semibold",children:Z.groups.B.name})]})]})]})}),"difficulty"===N&&_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"2. Choose Difficulty"}),_.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[_.jsxs(P,{onClick:()=>re("easy"),disabled:!e("easy"),children:[_.jsx("span",{className:"text-xl font-semibold",children:"Easy"}),_.jsx("p",{className:"text-sm text-slate-400",children:"Numbers 1-20"})]}),_.jsxs(P,{onClick:()=>re("medium"),disabled:!e("medium"),children:[_.jsx("span",{className:"text-xl font-semibold",children:"Medium"}),_.jsx("p",{className:"text-sm text-slate-400",children:"Up to 100"})]}),_.jsxs(P,{onClick:()=>re("hard"),disabled:!e("hard"),children:[_.jsx("span",{className:"text-xl font-semibold",children:"Hard"}),_.jsx("p",{className:"text-sm text-slate-400",children:"Up to 150"})]}),_.jsxs(P,{onClick:()=>re("master"),disabled:!e("master"),children:[_.jsx(m,{className:"w-6 h-6 mx-auto mb-1 text-yellow-400"}),_.jsx("span",{className:"text-xl font-semibold",children:"Master"}),_.jsx("p",{className:"text-sm text-slate-400",children:"Focus on 6-9 (ร, รท)"})]})]})]}),"mode"===N&&_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"3. Choose Game Mode"}),_.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[_.jsxs(P,{onClick:()=>ae("time"),children:[Z.modes.time.icon,_.jsx("h3",{className:"text-xl font-bold",children:Z.modes.time.name})]}),_.jsxs(P,{onClick:()=>ae("practice"),children:[Z.modes.practice.icon,_.jsx("h3",{className:"text-xl font-bold",children:Z.modes.practice.name})]}),_.jsxs(P,{onClick:()=>ae("streak"),children:[Z.modes.streak.icon,_.jsx("h3",{className:"text-xl font-bold",children:Z.modes.streak.name})]})]})]})]})};return _.jsxs("div",{className:"relative min-h-screen bg-slate-900 font-sans text-white flex flex-col items-center justify-center p-4 overflow-hidden",children:[_.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-30"}),_.jsx("main",{className:"z-10 w-full max-w-4xl flex items-center justify-center",children:(()=>{switch(s){case"playing":return _.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6 text-white",children:[_.jsxs("div",{className:"flex items-center space-x-4",children:[_.jsx(I,{icon:_.jsx(h,{size:24}),label:"Score",value:H,color:"bg-blue-500"}),_.jsx(I,{icon:_.jsx(o,{size:24}),label:"Streak",value:F,color:"bg-purple-500"})]}),_.jsxs("div",{className:"text-right",children:[_.jsx("p",{className:"text-sm text-slate-400",children:Z.groups[y].name}),_.jsx("p",{className:"text-lg font-bold capitalize text-white",children:Z.levels[S].name})]}),"time"===C&&_.jsx(I,{icon:_.jsx(c,{size:24}),label:"Time",value:`${q}s`,color:"bg-red-500"})]}),_.jsxs("div",{className:`relative p-8 rounded-xl shadow-2xl transition-all duration-300 ${"correct"===L?"bg-green-500/20 border-green-400":"incorrect"===L?"bg-red-500/20 border-red-400":"bg-slate-800/60 border-slate-700"} border-2`,children:[L&&_.jsxs("div",{className:"absolute top-4 right-4 flex items-center text-lg font-bold "+("correct"===L?"text-green-400":"text-red-400"),children:["correct"===L?_.jsx(p,{className:"mr-2"}):_.jsx(f,{className:"mr-2"}),T]}),_.jsxs("div",{className:"flex justify-center items-center text-6xl md:text-8xl font-bold text-white space-x-6 h-32",children:[_.jsx("span",{children:O.num1}),_.jsx("span",{className:"text-purple-400",children:O.operator}),_.jsx("span",{children:O.num2})]})]}),_.jsxs("form",{onSubmit:te,className:"mt-8",children:[_.jsx("input",{id:"answer-input",type:"number",value:B,onChange:e=>D(e.target.value),className:"w-full text-center text-4xl p-4 rounded-lg bg-slate-900 border-2 border-slate-700 text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition",placeholder:"?",disabled:!!L}),_.jsx("button",{type:"submit",className:"w-full mt-4 bg-purple-600 hover:bg-purple-500 text-white font-bold text-2xl py-4 rounded-lg transition-all transform hover:scale-105 disabled:bg-slate-600 disabled:cursor-not-allowed",disabled:!!L||""===B,children:"Submit Answer"})]})]});case"results":return(()=>{const e=G.correct+G.incorrect,s=e>0?Math.round(G.correct/e*100):0;return _.jsxs("div",{className:"text-center text-white w-full max-w-3xl",children:[_.jsx(b,{className:"w-20 h-20 text-yellow-400 mx-auto mb-4"}),_.jsx("h1",{className:"text-5xl font-bold mb-2",children:"Session Complete!"}),_.jsx("p",{className:"text-slate-300 mb-8",children:"Your results have been saved to your history."}),_.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8 text-left",children:[_.jsx(I,{icon:_.jsx(p,{size:28}),label:"Correct",value:G.correct,color:"bg-green-500"}),_.jsx(I,{icon:_.jsx(f,{size:28}),label:"Incorrect",value:G.incorrect,color:"bg-red-500"}),_.jsx(I,{icon:_.jsx(j,{size:28}),label:"Accuracy",value:`${s}%`,color:"bg-blue-500"})]}),_.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700",children:[_.jsx("h3",{className:"text-2xl font-bold mb-4 text-left",children:"Problem Review"}),_.jsx("div",{className:"max-h-60 overflow-y-auto pr-4",children:G.problems.map((e,s)=>_.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg mb-2 "+(e.isCorrect?"bg-green-500/10":"bg-red-500/10"),children:[_.jsxs("p",{className:"font-mono text-lg",children:[e.num1," ",e.operator," ",e.num2," = ",e.answer]}),!e.isCorrect&&_.jsxs("p",{className:"text-red-400",children:["Your answer: ",_.jsx("span",{className:"font-bold",children:e.userAnswer||"N/A"})]})]},s))})]}),_.jsx("button",{onClick:Q,className:"mt-8 bg-purple-600 hover:bg-purple-500 text-white font-bold text-xl py-3 px-10 rounded-lg transition-all transform hover:scale-105",children:"New Mission"})]})})();case"history":return _.jsxs("div",{className:"text-white w-full max-w-3xl",children:[_.jsxs("div",{className:"flex items-center justify-between mb-8",children:[_.jsxs("button",{onClick:Q,className:"flex items-center gap-2 text-slate-300 hover:text-white transition",children:[_.jsx(d,{size:20})," Back to Setup"]}),_.jsx("h1",{className:"text-4xl font-bold text-center",children:"Session History"}),_.jsx("div",{style:{width:"130px"}})]}),_.jsx("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700 max-h-[70vh] overflow-y-auto",children:V.length>0?_.jsx("div",{className:"space-y-4",children:V.map((e,s)=>_.jsxs("div",{className:"bg-slate-700/50 p-4 rounded-lg flex flex-col md:flex-row justify-between items-center gap-4",children:[_.jsxs("div",{className:"flex-1 text-center md:text-left",children:[_.jsx("p",{className:"font-bold text-lg",children:e.settings.mode}),_.jsxs("p",{className:"text-sm text-slate-300",children:[e.settings.group," - ",e.settings.difficulty]})]}),_.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-sm",children:[_.jsx(u,{size:16}),_.jsxs("span",{children:[new Date(e.date).toLocaleDateString()," ",new Date(e.date).toLocaleTimeString()]})]}),_.jsxs("div",{className:"flex gap-4",children:[_.jsxs("div",{className:"text-center",children:[_.jsx("p",{className:"text-slate-400 text-sm",children:"Score"}),_.jsx("p",{className:"font-bold text-xl text-white",children:e.score})]}),_.jsxs("div",{className:"text-center",children:[_.jsx("p",{className:"text-slate-400 text-sm",children:"Accuracy"}),_.jsxs("p",{className:"font-bold text-xl text-green-400",children:[e.accuracy,"%"]})]})]})]},s))}):_.jsx("div",{className:"text-center py-10",children:_.jsx("p",{className:"text-slate-400",children:"No mission history yet. Play a game to see your stats here!"})})})]});default:return ce()}})()})]})}O(document.getElementById("root")).render(_.jsx(e.StrictMode,{children:_.jsx(B,{})}));
